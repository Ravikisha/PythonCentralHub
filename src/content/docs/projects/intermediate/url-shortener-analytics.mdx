---
title: URL Shortener with Analytics
description: Build a comprehensive URL shortening service with click tracking, analytics dashboard, QR code generation, and web interface
sidebar:
  order: 62
hero:
  actions:
    - text: View on GitHub
      link: https://github.com/Ravikisha/PythonCentralHub/blob/main/projects/intermediate/urlshorteneranalytics.py
      icon: github
      variant: primary
---
import FileCode from '../../../../components/FileCode.astro'

## Abstract

Create a comprehensive URL shortening service with advanced analytics capabilities including click tracking, device/browser statistics, QR code generation, and a web dashboard. This project demonstrates database design, web development, data visualization, and analytics implementation.

## Prerequisites

- Python 3.7 or above
- Text Editor or IDE
- Solid understanding of Python syntax and OOP concepts
- Knowledge of web development concepts (HTML, HTTP)
- Familiarity with databases and SQL operations
- Understanding of data visualization principles
- Basic knowledge of Flask web framework

## Getting Started

### Create a new project
1. Create a new project folder and name it `urlShortenerAnalytics`.
2. Create a new file and name it `urlshorteneranalytics.py`.
3. Install required dependencies: `pip install flask matplotlib qrcode pillow`
4. Open the project folder in your favorite text editor or IDE.
5. Copy the code below and paste it into your `urlshorteneranalytics.py` file.

### Write the code
1. Add the following code to your `urlshorteneranalytics.py` file.
<FileCode file="projects/intermediate/urlshorteneranalytics.py" lang="python" title="URL Shortener with Analytics" />
2. Save the file.
3. Run the following command to start the application.
```cmd title="command" showLineNumbers{1}
C:\Users\username\Documents\urlShortenerAnalytics> python urlshorteneranalytics.py
üîó URL Shortener with Analytics
========================================

üìã Menu:
1. Create Short URL
2. View Analytics
3. List All URLs
4. Start Web Server
5. Delete URL
6. Exit

Enter your choice (1-6): 1
Enter the URL to shorten: https://github.com/user/repo
Custom alias (optional): my-repo
Title (optional): My GitHub Repository
Description (optional): My awesome Python project

‚úÖ Short URL created!
Short URL: http://localhost:5000/my-repo
QR Code generated: Yes

Enter your choice (1-6): 4
üåê Starting web server...
Access the web interface at: http://localhost:5000
```

## Explanation

1. The `sqlite3` module provides database functionality for storing URLs and analytics data.
2. The `URLShortenerAnalytics` class manages the core functionality and database operations.
3. The `init_database()` method creates tables for URLs and click tracking analytics.
4. The `generate_short_code()` function creates unique random codes for shortened URLs.
5. The `create_short_url()` method handles URL creation with optional custom aliases and expiration.
6. The `track_click()` function records detailed analytics for each URL access.
7. The `generate_qr_code()` method creates QR codes for easy mobile sharing.
8. The `get_analytics()` function provides comprehensive statistics and visualizations.
9. The Flask web interface offers a user-friendly dashboard for managing URLs.
10. The `generate_analytics_chart()` method creates visual charts using matplotlib.
11. Device and browser parsing extracts information from user agent strings.
12. The web templates provide responsive HTML interfaces for all features.

## Next Steps

Congratulations! You have successfully created a URL Shortener with Analytics in Python. Experiment with the code and see if you can modify the application. Here are a few suggestions:
- Add user authentication and personal dashboards
- Implement bulk URL shortening from CSV files
- Create mobile app integration with API endpoints
- Add social media sharing buttons and tracking
- Implement A/B testing for different short URLs
- Add geographic location tracking for clicks
- Create scheduled reports and email notifications
- Implement URL preview and safety checking
- Add collaborative features for teams

## Conclusion

In this project, you learned how to create a URL Shortener with Analytics in Python. You also learned about database design, web development, data visualization, and building comprehensive analytics systems. You can find the source code on [GitHub](https://github.com/Ravikisha/PythonCentralHub/blob/main/projects/intermediate/urlshorteneranalytics.py)

## Code Explanation

### Database Schema Design
```python title="urlshorteneranalytics.py" showLineNumbers{1}
def init_database(self):
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS urls (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            original_url TEXT NOT NULL,
            short_code TEXT UNIQUE NOT NULL,
            custom_alias TEXT UNIQUE,
            title TEXT,
            description TEXT,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            expires_at TIMESTAMP,
            is_active BOOLEAN DEFAULT 1,
            total_clicks INTEGER DEFAULT 0,
            unique_clicks INTEGER DEFAULT 0
        )
    ''')
```

Creates comprehensive database schema for URLs with metadata and analytics tracking.

### Short Code Generation
```python title="urlshorteneranalytics.py" showLineNumbers{1}
def generate_short_code(self, length=6):
    characters = string.ascii_letters + string.digits
    while True:
        short_code = ''.join(random.choice(characters) for _ in range(length))
        if not self.get_url_by_code(short_code):
            return short_code
```

Generates unique short codes with collision detection and validation.

### Click Analytics Tracking
```python title="urlshorteneranalytics.py" showLineNumbers{1}
def track_click(self, url_id, ip_address=None, user_agent=None, referrer=None):
    device_type = self.parse_device_type(user_agent)
    browser = self.parse_browser(user_agent)
    
    cursor.execute('''
        INSERT INTO clicks (url_id, ip_address, user_agent, referrer, device_type, browser)
        VALUES (?, ?, ?, ?, ?, ?)
    ''', (url_id, ip_address, user_agent, referrer, device_type, browser))
```

Records detailed click analytics including device type, browser, and referrer information.

### QR Code Generation
```python title="urlshorteneranalytics.py" showLineNumbers{1}
def generate_qr_code(self, url):
    qr = qrcode.QRCode(version=1, box_size=10, border=5)
    qr.add_data(url)
    qr.make(fit=True)
    
    img = qr.make_image(fill_color="black", back_color="white")
    img_str = base64.b64encode(buffer.getvalue()).decode()
    return f"data:image/png;base64,{img_str}"
```

Creates QR codes for URLs and converts them to base64 for web display.

### Analytics Dashboard
```python title="urlshorteneranalytics.py" showLineNumbers{1}
def get_analytics(self, url_id):
    # Daily clicks over time
    cursor.execute('''
        SELECT DATE(clicked_at) as date, COUNT(*) as clicks
        FROM clicks WHERE url_id = ? 
        GROUP BY DATE(clicked_at) ORDER BY date
    ''', (url_id,))
    
    # Device and browser statistics
    cursor.execute('''
        SELECT device_type, COUNT(*) as count
        FROM clicks WHERE url_id = ? GROUP BY device_type
    ''', (url_id,))
```

Provides comprehensive analytics including time series data and demographic breakdowns.

### Web Interface Integration
```python title="urlshorteneranalytics.py" showLineNumbers{1}
@app.route('/<short_code>')
def redirect_url(short_code):
    url_data = shortener.get_url_by_code(short_code)
    
    # Track the click
    shortener.track_click(
        url_id=url_data[0],
        ip_address=request.remote_addr,
        user_agent=request.headers.get('User-Agent'),
        referrer=request.headers.get('Referer')
    )
    
    return redirect(url_data[1])
```

Handles URL redirection while automatically tracking analytics data.

## Features

- **URL Shortening**: Create short, memorable URLs with optional custom aliases
- **QR Code Generation**: Automatic QR code creation for mobile sharing
- **Click Analytics**: Detailed tracking of clicks, devices, browsers, and referrers
- **Expiration Dates**: Set automatic expiration for temporary links
- **Web Dashboard**: Complete web interface for managing URLs and viewing analytics
- **Data Visualization**: Charts and graphs for analytics insights
- **REST API**: Programmatic access to all features via JSON API
- **Device Detection**: Automatic detection of mobile, tablet, and desktop users
- **Browser Analytics**: Track which browsers are used to access your links
- **Referrer Tracking**: See where your traffic is coming from

## Next Steps

### Enhancements
- Add user authentication and personal dashboards
- Implement bulk URL shortening from CSV files
- Create mobile app integration with API endpoints
- Add social media sharing buttons and tracking
- Implement A/B testing for different short URLs
- Add geographic location tracking for clicks
- Create scheduled reports and email notifications
- Implement URL preview and safety checking

### Learning Extensions
- Study web analytics and tracking technologies
- Explore advanced data visualization techniques
- Learn about user experience optimization
- Practice with cloud deployment and scaling
- Understand security best practices for URL services
- Explore machine learning for click prediction

## Educational Value

This project teaches:
- **Database Design**: Creating normalized schemas for analytics data
- **Web Development**: Building full-stack applications with Flask
- **Data Analytics**: Implementing comprehensive tracking and reporting
- **QR Codes**: Generating and integrating QR codes for mobile experiences
- **User Agent Parsing**: Extracting device and browser information
- **Data Visualization**: Creating charts and graphs with matplotlib
- **REST APIs**: Designing and implementing RESTful web services
- **URL Validation**: Ensuring proper URL format and security

Perfect for understanding web analytics, database design, and building production-ready web applications with comprehensive tracking capabilities.
